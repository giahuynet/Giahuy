function getWidgetLichThang(t, n) { ngayhientai = new Date, $("." + t).html(stylelichthang); var a = $("#" + n); data_urlimage = a.attr("data-urlimage"), data_startin = parseInt(a.attr("data-startin")), data_amduongshow = parseInt(a.attr("data-amduongshow")), data_colorbackground = a.attr("data-colorbackground"), data_colortoday = a.attr("data-colortoday"), data_colorborder = a.attr("data-colorborder"), data_coloram = a.attr("data-coloram"), data_colorduong = a.attr("data-colorduong"), "" == data_urlimage.toString() ? $(".anh-lich-img").hide() : ($(".anh-lich-img").show(), $(".anh-lich-img img").attr("src", data_urlimage)), CreateCalendarUCWidget(data_startin), updateHienAmLich(data_amduongshow), updateColorNgayDuong(data_colorduong), updateColorNgayAm(data_coloram), updateColorNenLich(data_colorbackground), updateColorNgayHienTai(data_colortoday), updateColorVien(data_colorborder) } function TinhCanNgay(t) { var n = DateDiff(NgayBatDauCan, t, "Ngay"); return n = (10 + n % 10) % 10, new Array(Can[n], n) } function TinhChiNgay(t) { var n = DateDiff(NgayBatDauChi, t, "Ngay"); return n = (12 + n % 12) % 12, new Array(Chi[n], n) } function TinhCanNam(t) { var n = DateDiff(NgayBatDauNam, t, "Nam"); return n = (10 + n % 10) % 10, new Array(Can[n], n) } function TinhChiNam(t) { var n = DateDiff(NgayBatDauNam, t, "Nam"); return n = (12 + n % 12) % 12, new Array(Chi[n], n) } function TinhCanThang(t, n) { return Index = (12 * n + t + 3) % 10, new Array(Can[Index], Index) } function TinhChiThang(t) { return Index = (t + 1) % 12, new Array(Chi[Index], Index) } function TinhCanGio(t, n) { var a = TinhChiGio(n)[1], e = DateDiff(NgayBatDauCan, t, "Ngay"); return e = 2 * (e = (10 + e % 10) % 10) % 10, 0 < a && (e = (e + a) % 10), new Array(Can[e], e) } function TinhChiGio(t) { return 23 <= t || t < 1 ? Index = 0 : 1 <= t && t < 3 ? Index = 1 : 3 <= t && t < 5 ? Index = 2 : 5 <= t && t < 7 ? Index = 3 : 7 <= t && t < 9 ? Index = 4 : 9 <= t && t < 11 ? Index = 5 : 11 <= t && t < 13 ? Index = 6 : 13 <= t && t < 15 ? Index = 7 : 15 <= t && t < 17 ? Index = 8 : 17 <= t && t < 19 ? Index = 9 : 19 <= t && t < 21 ? Index = 10 : 21 <= t && t < 23 && (Index = 11), new Array(Chi[Index], Index) } function TinhNgayHoangDao(t, n) { var a = DateDiff(NgayBatDauChi, t, "Ngay"); return NgayHoangDao[a = (24 + (a = (12 + a % 12) % 12) - 2 * (n - 1)) % 12] } function TinhNgayHoangDao2(t) { var n = t.split(split_1), a = convertSolar2Lunar(parseInt(n[2].toString()), parseInt(n[1].toString()), parseInt(n[0].toString()), 7)[1], e = DateDiff(NgayBatDauChi, t, "Ngay"); return NgayHoangDao[e = (24 + (e = (12 + e % 12) % 12) - 2 * (a - 1)) % 12] } function NgayDaiMinhCatNhat(t) { var n = DateDiff(NgayBatDauCan, t, "Ngay"); n = (10 + n % 10) % 10; var a = DateDiff(NgayBatDauChi, t, "Ngay"); a = (12 + a % 12) % 12; for (var e = Can[n] + " " + Chi[a], o = 0; o < DaiMinh.length; o++)if (e.toLowerCase() == DaiMinh[o].toLowerCase()) return 1; return 0 } function TinhGioHoangDao(t, n) { var a = TinhChiNgay(t)[1]; a %= 6; var e = TinhChiGio(n)[1]; return GioHoangDao[a][e] } function LayGioHoangDao(t) { for (var n = 0, a = "", e = "", o = "", i = "", r = "", s = "", h = "", l = 0; l < 24; l += 2)1 == TinhGioHoangDao(t, l) && (1 == (n += 1) ? a = TinhCanGio(t, l)[0] + " " + TinhChiGio(l)[0] + "(" + KhoangGio[l / 2] + ")" : 2 == n ? e = TinhCanGio(t, l)[0] + " " + TinhChiGio(l)[0] + "(" + KhoangGio[l / 2] + ")" : 3 == n ? o = TinhCanGio(t, l)[0] + " " + TinhChiGio(l)[0] + "(" + KhoangGio[l / 2] + ")" : 4 == n ? i = TinhCanGio(t, l)[0] + " " + TinhChiGio(l)[0] + "(" + KhoangGio[l / 2] + ")" : 5 == n ? r = TinhCanGio(t, l)[0] + " " + TinhChiGio(l)[0] + "(" + KhoangGio[l / 2] + ")" : 6 == n ? s = TinhCanGio(t, l)[0] + " " + TinhChiGio(l)[0] + "(" + KhoangGio[l / 2] + ")" : h += "" == h ? TinhCanGio(t, l)[0] + " " + TinhChiGio(l)[0] + "(" + KhoangGio[l / 2] + ")" : "," + TinhCanGio(t, l)[0] + " " + TinhChiGio(l)[0] + "(" + KhoangGio[l / 2] + ")"); return '<div class="thongtin_lichngaytot_left"><div class="thongtin_lichngaytot_noidung"><div class="thongtinleft_noidung">' + a + '</div><div class="thongtinleft_noidung">' + e + '</div></div></div><div class="thongtin_lichngaytot_center"><div class="thongtinleft_noidung_center">' + o + '</div><div class="thongtinleft_noidung_center">' + i + '</div></div><div class="thongtin_lichngaytot_right"><div class="thongtin_lichngaytot_noidung"><div class="thongtinleft_noidung_right">' + r + '</div> <div class="thongtinleft_noidung_right">' + s + "</div></div></div>" } function TinhMenhNguHanh(t, n) { var a = DateDiff(NgayBatDauChi, t, n); return a = (60 + a) % 60, a = Math.floor(a / 2), new Array(MenhNguHanh[a], MenhNguHanh2[a], a) } function TinhTietKhi(t) { var n = new Date(t), a = n.getDate(), e = n.getMonth() + 1, o = n.getFullYear(); if (2 == e && 5 <= a && a < 19) Index = 0; else if (2 == e && 19 <= a || 3 == e && a < 6) Index = 1; else if (3 == e && 7 <= a && a < 21) Index = 2; else if (3 == e && 22 <= a || 4 == e && a < 5) Index = 3; else if (4 == e && 6 <= a && a < 20) Index = 4; else if (4 == e && 21 <= a || 5 == e && a < 6) Index = 5; else if (5 == e && 7 <= a && a < 21) Index = 6; else if (5 == e && 22 <= a || 6 == e && a < 5) Index = 7; else if (6 == e && 7 <= a && a < 21) Index = 8; else if (6 == e && 22 <= a || 7 == e && a < 7) Index = 9; else if (7 == e && 8 <= a && a < 23) Index = 10; else if (7 == e && 24 <= a || 8 == e && a < 8) Index = 11; else if (8 == e && 9 <= a && a < 23) Index = 12; else if (8 == e && 24 <= a || 9 == e && a < 8) Index = 13; else if (9 == e && 9 <= a && a < 23) Index = 14; else if (9 == e && 24 <= a || 10 == e && a < 8) Index = 15; else if (10 == e && 9 <= a && a < 23) Index = 16; else if (10 == e && 24 <= a || 11 == e && a < 8) Index = 17; else if (11 == e && 9 <= a && a < 22) Index = 18; else if (11 == e && 23 <= a || 12 == e && a < 7) Index = 19; else if (12 == e && 8 <= a && a < 22) Index = 20; else if (12 == e && 23 <= a || 1 == e && a < 6) Index = 21; else if (1 == e && 7 <= a && a < 20) Index = 22; else if (1 == e && 21 <= a || 2 == e && a < 4) Index = 23; else { var i = getSunLongitude2(jdFromDate(a + 1, e, o)); Index = Math.floor(i / 15), Index = (Index + 3) % 24 } return new Array(TietKhi[Index], Index) } function TinhTruc(t) { var n = TinhTietKhi(t)[1], a = (12 + TinhChiNgay(t)[1] - (n = Math.floor(n / 2)) - 2) % 12; return new Array(Truc[a], a) } function DateDiff(t, n, a) { var e, o, i = new Date(t), r = new Date(n); switch (a) { case "Nam": e = i.getFullYear(), o = r.getFullYear(); break; case "Ngay": e = Math.floor(i / 864e5), o = Math.floor(r / 864e5); break; default: return }return o - e } function jdFromDate(t, n, a) { var e, o, i, r; return o = a + 4800 - (e = Math.floor((14 - n) / 12)), i = n + 12 * e - 3, (r = t + Math.floor((153 * i + 2) / 5) + 365 * o + Math.floor(o / 4) - Math.floor(o / 100) + Math.floor(o / 400) - 32045) < 2299161 && (r = t + Math.floor((153 * i + 2) / 5) + 365 * o + Math.floor(o / 4) - 32083), r } function jdToDate(t) { var n, a, e, o, i, r, s, h, l; return e = 2299160 < t ? (n = t + 32044, a = Math.floor((4 * n + 3) / 146097), n - Math.floor(146097 * a / 4)) : (a = 0, t + 32082), o = Math.floor((4 * e + 3) / 1461), i = e - Math.floor(1461 * o / 4), r = Math.floor((5 * i + 2) / 153), s = i - Math.floor((153 * r + 2) / 5) + 1, h = r + 3 - 12 * Math.floor(r / 10), l = 100 * a + o - 4800 + Math.floor(r / 10), new Array(s, h, l) } function getNewMoonDay(t, n) { var a, e, o, i, r, s, h, l, d, c; return o = (e = (a = t / 1236.85) * a) * a, i = Math.PI / 180, r = 2415020.75933 + 29.53058868 * t + 1178e-7 * e - 155e-9 * o, r += 33e-5 * Math.sin((166.56 + 132.87 * a - .009173 * e) * i), s = 359.2242 + 29.10535608 * t - 333e-7 * e - 347e-8 * o, h = 306.0253 + 385.81691806 * t + .0107306 * e + 1236e-8 * o, l = 21.2964 + 390.67050646 * t - .0016528 * e - 239e-8 * o, d = (d = (.1734 - 393e-6 * a) * Math.sin(s * i) + .0021 * Math.sin(2 * i * s)) - .4068 * Math.sin(h * i) + .0161 * Math.sin(2 * i * h), c = r + (d = (d = (d = (d = (d -= 4e-4 * Math.sin(3 * i * h)) + .0104 * Math.sin(2 * i * l) - .0051 * Math.sin(i * (s + h))) - .0074 * Math.sin(i * (s - h)) + 4e-4 * Math.sin(i * (2 * l + s))) - 4e-4 * Math.sin(i * (2 * l - s)) - 6e-4 * Math.sin(i * (2 * l + h))) + .001 * Math.sin(i * (2 * l - h)) + 5e-4 * Math.sin(i * (2 * h + s))) - (a < -11 ? .001 + 839e-6 * a + 2261e-7 * e - 845e-8 * o - 81e-9 * a * o : 265e-6 * a - 278e-6 + 262e-6 * e), Math.floor(c + .5 + n / 24) } function getSunLongitude(t, n) { var a, e, o, i, r; return e = (a = (t - 2451545.5 - n / 24) / 36525) * a, o = Math.PI / 180, i = 357.5291 + 35999.0503 * a - 1559e-7 * e - 48e-8 * a * e, r = 280.46645 + 36000.76983 * a + 3032e-7 * e + ((1.9146 - .004817 * a - 14e-6 * e) * Math.sin(o * i) + (.019993 - 101e-6 * a) * Math.sin(2 * o * i) + 29e-5 * Math.sin(3 * o * i)), r *= o, r -= 2 * Math.PI * Math.floor(r / (2 * Math.PI)), Math.floor(r / Math.PI * 6) } function getSunLongitude2(t) { var n, a, e, o, i; return a = (n = (t - 2451545.5 - 7 / 24) / 36525) * n, e = Math.PI / 180, o = 357.5291 + 35999.0503 * n - 1559e-7 * a - 48e-8 * n * a, i = 280.46645 + 36000.76983 * n + 3032e-7 * a + ((1.9146 - .004817 * n - 14e-6 * a) * Math.sin(e * o) + (.019993 - 101e-6 * n) * Math.sin(2 * e * o) + 29e-5 * Math.sin(3 * e * o)), Math.floor(i) % 360 } function getLunarMonth11(t, n) { var a, e, o; return e = jdFromDate(31, 12, t) - 2415021, 9 <= getSunLongitude(o = getNewMoonDay(a = Math.floor(e / 29.530588853), n), n) && (o = getNewMoonDay(a - 1, n)), o } function getLeapMonthOffset(t, n) { var a, e, o, i; for (e = 0, o = getSunLongitude(getNewMoonDay((a = Math.floor((t - 2415021.076998695) / 29.530588853 + .5)) + (i = 1), n), n); e = o, (o = getSunLongitude(getNewMoonDay(a + ++i, n), n)) != e && i < 14;); return i - 1 } function convertSolar2Lunar(t, n, a, e) { var o, i, r, s, h, l, d, c, g, u; return (i = jdFromDate(t, n, a)) < (r = getNewMoonDay((o = Math.floor((i - 2415021.076998695) / 29.530588853)) + 1, e)) && (r = getNewMoonDay(o, e)), r <= (h = s = getLunarMonth11(a, e)) ? s = getLunarMonth11((c = a) - 1, e) : h = getLunarMonth11(c = a + 1, e), l = i - r + 1, diff = Math.floor((r - s) / 29), g = 0, d = diff + 11, 365 < h - s && (leapMonthDiff = getLeapMonthOffset(s, e), diff >= leapMonthDiff && (d = diff + 10, diff == leapMonthDiff && (g = 1))), 12 < d && (d -= 12), 11 <= d && diff < 4 && (c -= 1), u = 0 < g ? Math.floor(d).toString() + "(Nhuận)" : Math.floor(d).toString(), new Array(l, d, c, u) } function convertLunar2Solar(t, n, a, e, o) { var i, r, s, h; if ((r = n - 11) < 0 && (r += 12), 365 < (n < 11 ? (i = getLunarMonth11(a - 1, o), getLunarMonth11(a, o)) : (i = getLunarMonth11(a, o), getLunarMonth11(a + 1, o))) - i) { if ((h = (s = getLeapMonthOffset(i, o)) - 2) < 0 && (h += 12), 0 != e && n != h) return new Array(0, 0, 0); (0 != e || s <= r) && (r += 1) } return jdToDate(getNewMoonDay(Math.floor(.5 + (i - 2415021.076998695) / 29.530588853) + r, o) + t - 1) } function CreateCalendarUCWidget(t) { function a() { $month = $("#custom-month").val(cal.getMonthName()), $year = $("#custom-year").val(cal.getYear()), ShowDayDetail() } $calendar = $("#calendar-widget-lvs"), cal = $calendar.calendariosammo({ onDayClick: function (t, n, a) { var e, o, i; e = a, o = new Date, i = ("" == GetFullString(e.day) ? o.getDate() : GetFullString(e.day)) + split_1 + ("" == GetFullString(e.month) ? o.getMonth() + 1 : GetFullString(e.month)) + split_1 + e.year.toString(), e.year.toString(), GetFullString(e.month), GetFullString(e.day), window.location = "https://lichngaytot.com/xem-ngay-tot-xau-" + i.replace("/", "-") }, caldata: null, displayWeekAbbr: !0, startIn: t }), $month = $("#custom-month").val(cal.getMonth()), $year = $("#custom-year").val(cal.getYear()), $("#custom-next").on("click", function () { cal.gotoNextMonth(a) }), $("#custom-prev").on("click", function () { cal.gotoPreviousMonth(a) }), $("#custom-current").on("click", function () { cal.gotoNow(a) }), $("#custom-month").on("change", function () { var t = parseInt($("#custom-month").val()) - 1, n = parseInt($("#custom-year").val()); cal.goto(t, n, a) }), $("#custom-year").on("change", function () { var t = parseInt($("#custom-month").val()) - 1, n = parseInt($("#custom-year").val()); cal.goto(t, n, a) }) } function CreateCalendarFull() { function e() { t.val(o.getMonthName()), n.val(o.getYear()), ShowDayDetail() } var o = $("#calendar").calendario({ onDayClick: function (t, n, a) { var e = a.year.toString() + split_1 + GetFullString(a.month) + split_1 + GetFullString(a.day); $.cookie(CookieName, e, { expires: 7, path: "/" }), ("" + window.location).indexOf(ShowDetailUrl) < 0 ? window.location = ShowDetailUrl : ($(".fc-selectedday").removeClass("fc-selectedday"), t.addClass("fc-selectedday")) }, caldata: null }), t = $("#custom-month").val(o.getMonthName()), n = $("#custom-year").val(o.getYear()); $("#custom-next").on("click", function () { o.gotoNextMonth(e) }), $("#custom-prev").on("click", function () { o.gotoPreviousMonth(e) }), $("#custom-current").on("click", function () { o.gotoNow(e) }), $("#custom-month").on("change", function () { var t = parseInt($("#custom-month").val()) - 1, n = parseInt($("#custom-year").val()); o.goto(t, n, e) }), $("#custom-year").on("change", function () { var t = parseInt($("#custom-month").val()) - 1, n = parseInt($("#custom-year").val()); o.goto(t, n, e) }), $("#custom-year").on("keypress", function (t) { if (13 == t.keyCode) { var n = parseInt($("#custom-month").val()) - 1, a = parseInt($("#custom-year").val()); return o.goto(n, a, e), !1 } }) } function GetSelectedDate() { var t, n = $.cookie(CookieName); if (n) t = n.split(split_1); else { var a = new Date; t = (n = a.getFullYear().toString() + split_1 + a.getMonth().toString() + split_1 + a.getDate().toString()).split(split_1) } return new Array(t[2], t[1], t[0], n) } function ShowDayDetail() { var t, n = new Date, a = GetSelectedDate(), e = a[3], o = parseInt(a[0]), i = parseInt(a[1]), r = parseInt(a[2]), s = convertSolar2Lunar(o, i, r, 7), h = parseInt(s[0]), l = parseInt(s[1]), d = parseInt(s[2]), c = (TinhCanGio(e, n.getHours()), TinhChiGio(n.getHours()), TinhCanNgay(e)), g = TinhChiNgay(e), u = TinhCanThang(l, d), v = TinhChiThang(l), f = TinhCanNam(e), m = TinhChiNam(e), y = TinhNgayHoangDao(e, l), p = LayGioHoangDao(e), T = TinhMenhNguHanh(e, "Ngay"), w = TinhMenhNguHanh(e, "Nam"), N = TinhTietKhi(e), D = TinhTruc(e); t = 1 == y ? '<div class="ngayhoangdao">Ngày hoàng đạo <img src="' + ImagePath + 'hoangdao.png"></img></div>' : '<div class="ngayhacdao">Ngày hắc đạo <img src="' + ImagePath + 'ngay-hac-dao.png"></img></div>', $("#thangnamduong").html("Tháng " + GetFullString(i) + " Năm " + GetFullString(r)), $("#ngayduong").html(GetFullString(o)), $("#ThuTuan").html(GetTuan(o, i, r)), $("#thangam").html(GetThang(l)), $("#ngayam").html(GetFullString(h)), $("#battu").html("<div class='thongtinleft_noidung'><strong>Năm " + f[0] + " " + m[0] + "</strong></div><div class='thongtinleft_noidung'>Tháng " + u[0] + " " + v[0] + "</div><div class='thongtinleft_noidung'>Ngày " + c[0] + " " + g[0] + "</div>"), $("#hoangdao").html(t), $("#giohoangdao").html(p), $("#menhngay").html("<b>Mệnh ngày:</b><br />" + T[0] + "<br />(" + T[1] + ")"), $("#menhnam").html(w[0] + "(" + w[1] + ")"), $("#tietkhi").html("<b>Tiết khí:</b><br />" + N[0]), $("#truc").html(D[0]), AddlAnhNen(o, i, r), AddAnhConGiap(e) } function GetFullString(t) { return t < 10 ? "0" + t.toString() : t.toString() } function GetTuan(t, n, a) { var e = jdFromDate(t, n, a); return TUAN[(e + 1) % 7] } function GetThang(t) { return "Tháng " + THANG[t -= 1] } function AddlAnhNen() { try { var t = ImagePath + "anh-nen/nen" + String(GetRandomNumber()) + ".png"; $("#bg_lichngaytot").css("background-image", "url('" + t + "')") } catch (t) { alert(t) } } function AddAnhConGiap(t) { var n = DateDiff(NgayBatDauNam, t, "Nam"); n = (12 + n % 12) % 12; var a = Array(["Ti", "Suu", "Dan", "Mao", "Thin", "Ty", "Ngo", "Mui", "Than", "Dau", "Tuat", "Hoi"][n], n), e = ImagePath + "con-giap/" + a[0] + ".png"; $("#thongtin_lichngaytot").css("background-image", "url('" + e + "')") } function GetRandomNumber() { var t = Math.floor(10 * Math.random() + 1); return 6 < t && (t = 10 == t ? 1 : 10 - t), t } function updateHienAmLich(t) { if (1 == t) { var n = $("#calendar-widget-lvs .lvs-content .lvs-date"), a = $("#calendar-widget-lvs .lvs-content .lvs-date-cn"); n.removeClass("lvs-date"), n.removeClass("lvs-date-duong"), a.removeClass("lvs-date-cn"), a.removeClass("lvs-date-cn-duong"), $("#calendar-widget-lvs .lvs-content div").css({ display: "none" }), n.addClass("lvs-date-duong"), a.addClass("lvs-date-cn-duong") } else { n = $("#calendar-widget-lvs .lvs-content .lvs-date-duong"), a = $("#calendar-widget-lvs .lvs-content .lvs-date-cn-duong"); n.removeClass("lvs-date-duong"), n.removeClass("lvs-date"), a.removeClass("lvs-date-cn-duong"), a.removeClass("lvs-date-cn"), $("#calendar-widget-lvs .lvs-content div").css({ display: "block" }), n.addClass("lvs-date"), a.addClass("lvs-date-cn") } } function updateColorNgayDuong(t) { $("#calendar-widget-lvs .lvs-date-duong").css({ color: t }), $("#calendar-widget-lvs .lvs-date").css({ color: t }) } function updateColorNgayAm(t) { $("#calendar-widget-lvs span.lvs-date-ngayam").css({ color: t }) } function updateColorVien(t) { $("#calendar-widget-lvs .lvs-calendar .lvs-head").css({ "border-left": "1px solid " + t, "border-right": "1px solid " + t }), $("#calendar-widget-lvs .lvs-calendar .lvs-body").css({ border: "0px" }), $("#calendar-widget-lvs .lvs-calendar .lvs-body").css({ "border-top": "1px solid " + t }), $("#calendar-widget-lvs .lvs-calendar .lvs-body").css({ "border-left": "1px solid " + t }), $("#calendar-widget-lvs .lvs-calendar .lvs-row").css({ "border-bottom": "1px solid " + t }), $("#calendar-widget-lvs .lvs-calendar .lvs-row>div").css({ "border-right": "1px solid " + t }), $("#calendar-widget-lvs .lvs-head").css({ "border-top": "1px solid " + t }) } function updateColorNenLich(t) { $("#calendar-widget-lvs.lvs-calendar-container").css({ background: t }), $("#calendar-widget-lvs .lvs-calendar .lvs-row > div").css({ background: t }) } function updateColorNgayHienTai(t) { $("#calendar-widget-lvs .lvs-today").css({ background: t }) } var ngayhientai, stylelichthang = "<style>.lvs-calendar-container{background:#f6f6f6;box-shadow:inset 0 1px rgba(255,255,255,.8)}.lvs-calendar .lvs-head{font-weight:700;text-transform:uppercase;font-size:12px}.selectmonth,.selectyear{font-weight:300;border:1px solid #ddd;font-size:14px;float:left;margin-right:5px}.lvs-calendar .lvs-row>div{cursor:pointer;text-align:center;border-right:1px solid #ddd;padding:1px;overflow:hidden}.lvs-calendar .lvs-row>div:empty{background:0 0;cursor:default}.lvs-row .lvs-content:hover{background:rgba(223,241,250,.83)}.selectmonth{width:45px}.selectyear{width:70px}.lvs-calendar .lvs-row>div>div a,.lvs-calendar .lvs-row>div>div span{display:block}span.lvs-date-hacdao,span.lvs-date-hoangdao,span.lvs-date-ngayam,span.lvs-date-ngayam-cn{display:inline-block;text-align:right;background:0}span.lvs-date-ngayam{color:#909090;font-size:11px;font-weight:200}span.lvs-date-ngayam-cn{color:red;font-size:11px;font-weight:200}span.lvs-date-hacdao,span.lvs-date-hoangdao{font-size:18px;font-weight:300;text-shadow:0 1px 1px rgba(0,0,0,.3)}span.lvs-date-hoangdao{color:Red}span.lvs-date-hacdao:before,span.lvs-date-hoangdao:before{content:'*'}span.lvs-date-hacdao{color:#000}.lvs-content .lvs-date:hover{color:#ddd}.lvs-calendar-container{position:relative;height:250px;width:100%}.lvs-calendar{width:100%;height:100%}.lvs-calendar .lvs-head{height:30px;line-height:30px;color:#000;border-left:1px solid #ddd;border-right:1px solid #ddd}.lvs-head{border-top:solid 1px #ccc}.lvs-calendar .lvs-body{position:relative;width:100%;height:100%;height:-moz-calc(100% - 30px);height:-webkit-calc(100% - 30px);height:calc(100% - 30px);border:1px solid #ddd}.lvs-calendar .lvs-row{width:100%;border-bottom:1px solid #ddd}.lvs-four-rows .lvs-row{height:25%}.lvs-five-rows .lvs-row{height:20%}.lvs-six-rows .lvs-row{height:16.66%;height:-moz-calc(100%/6);height:-webkit-calc(100%/6);height:calc(100%/6);line-height:100%}.lvs-calendar .lvs-head>div,.lvs-calendar .lvs-row>div{float:left;height:100%;width:14.28%;width:-moz-calc(100%/7);width:-webkit-calc(100%/7);width:calc(99.99%/7);position:relative}.lvs-calendar .lvs-row>div>span.lvs-date,.lvs-calendar .lvs-row>div>span.lvs-date-cn{float:left;font-weight:700;height:14px;font-size:13px;line-height:14px;text-shadow:0 -1px 0 rgba(255,255,255,.8)}.ie9 .lvs-calendar .lvs-head>div,.ie9 .lvs-calendar .lvs-row>div{width:14.2%}.lvs-calendar .lvs-head>div{text-align:center}.lvs-calendar .lvs-row>div>span.lvs-date{color:#000}.lvs-calendar .lvs-row>div>span.lvs-date-cn{color:red}.lvs-calendar .lvs-row>div>span.lvs-weekday{padding-left:5px;display:none}.lvs-calendar .lvs-row>div.lvs-today{background:#fff4c3}.lvs-calendar .lvs-row>div.lvs-out{opacity:.6}.lvs-calendar .lvs-head>div:last-child,.lvs-calendar .lvs-row>div:last-child{border-right:0}.lvs-calendar .lvs-row:last-child{border-bottom:0}.lvs-calendar-container *,.lvs-calendar-container :after,.lvs-calendar-container :before{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:0;margin:0}.lvs-calendar-container a{color:#555;text-decoration:none}.lvs-calendar .lvs-row>div>span.lvs-date-cn-duong,.lvs-calendar .lvs-row>div>span.lvs-date-duong{float:left;font-size:18px;font-weight:700;color:red;width:100%;height:100%;line-height:200%}</style>", data_urlimage = "", data_startin = 1, data_amduongshow = 2, data_colorbackground = "#fff", data_colortoday = "#ff0", data_colorborder = "#fff", data_coloram = "#c0c0c0", data_colorduong = "#000"; !function (d, c, t) { function g(t) { return t } function u(t) { return decodeURIComponent(t.replace(n, " ")) } var n = /\+/g, v = d.cookie = function (t, n, a) { if (void 0 !== n) { if (a = d.extend({}, v.defaults, a), null === n && (a.expires = -1), "number" == typeof a.expires) { var e = a.expires, o = a.expires = new Date; o.setDate(o.getDate() + e) } return n = v.json ? JSON.stringify(n) : String(n), c.cookie = [encodeURIComponent(t), "=", v.raw ? n : encodeURIComponent(n), a.expires ? "; expires=" + a.expires.toUTCString() : "", a.path ? "; path=" + a.path : "", a.domain ? "; domain=" + a.domain : "", a.secure ? "; secure" : ""].join("") } for (var i, r = v.raw ? g : u, s = c.cookie.split("; "), h = 0; i = s[h] && s[h].split("="); h++)if (r(i.shift()) === t) { var l = r(i.join("=")); return v.json ? JSON.parse(l) : l } return null }; v.defaults = {}, d.removeCookie = function (t, n) { return null !== d.cookie(t) && (d.cookie(t, null, n), !0) } }(jQuery, document), function (i, n) { "use strict"; function e(t, n, a) { return a.toString() + "-" + (n < 10 ? "0" + n.toString() : n.toString()) + "-" + (t < 10 ? "0" + t.toString() : t.toString()) } function o(t) { i.cookie(r, t, { expires: 7, path: "/" }) } var r = "SelectedDate"; i.Calendarios = function (t, n) { this.$el = i(n), this._init(t) }, i.Calendarios.defaults = { weeks: ["Chủ nhật", "Thứ hai", "Thứ ba", "Thứ tư", "Thứ năm", "Thứ sáu", "Thứ bảy"], weekabbrs: ["CN", "T2", "T3", "T4", "T5", "T6", "T7"], months: ["Tháng 1", "Tháng 2", "Tháng 3", "Tháng 4", "Tháng 5", "Tháng 6", "Tháng 7", "Tháng 8", "Tháng 9", "Tháng 10", "Tháng 11", "Tháng 12"], monthabbrs: ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12"], displayWeekAbbr: !1, displayMonthAbbr: !0, startIn: 1, onDayClick: function () { return !1 } }, i.Calendarios.prototype = { _init: function (t) { var n, a = i.cookie(r); a ? n = a.split("-") : a = "", this.options = i.extend(!0, {}, i.Calendarios.defaults, t), this.today = new Date, this.dayNumber = "" != a ? (this.options.month = parseInt(n[1]), this.options.year = parseInt(n[0]), parseInt(n[2])) : this.today.getDate(), this.month = isNaN(this.options.month) || null == this.options.month ? this.today.getMonth() : this.options.month - 1, this.year = isNaN(this.options.year) || null == this.options.year ? this.today.getFullYear() : this.options.year, this.caldata = this.options.caldata || {}, this._generateTemplate(), this._initEvents() }, _initEvents: function () { var o = this; this.$el.on("click.calendariosammo", "div.lvs-row > div", function () { var t = i(this), n = t.index(), a = t.children("div"), e = { day: t.children("span.lvs-date").text(), month: o.month + 1, monthname: o.options.displayMonthAbbr ? o.options.monthabbrs[o.month] : o.options.months[o.month], year: o.year, weekday: n + o.options.startIn, weekdayname: o.options.weeks[n + o.options.startIn] }; e.day && o.options.onDayClick(t, a, e) }) }, _generateTemplate: function (t) { var n, a = this._getHead(), e = this._getBody(); switch (this.rowTotal) { case 4: n = "lvs-four-rows"; break; case 5: n = "lvs-five-rows"; break; case 6: n = "lvs-six-rows" }this.$cal = i('<div class="lvs-calendar ' + n + '">').append(a, e), this.$el.find("div.lvs-calendar").remove().end().append(this.$cal), t && t.call() }, _getHead: function () { for (var t = '<div class="lvs-head">', n = 0; n <= 6; n++) { var a = n + this.options.startIn, e = 6 < a ? a - 6 - 1 : a; t += 0 == e ? '<div style="color:red;">' : "<div>", t += this.options.displayWeekAbbr ? this.options.weekabbrs[e] : this.options.weeks[e], t += "</div>" } return t + "</div>" }, _getBody: function () { var t = new Date(this.year, this.month + 1, 0).getDate(), n = new Date(this.year, this.month, 1); this.startingDay = n.getDay(); for (var a = '<div class="lvs-body"><div class="lvs-row">', e = 1, o = 0; o < 7; o++) { for (var i = 0; i <= 6; i++) { var r = this.startingDay - this.options.startIn, s = r < 0 ? 6 + r + 1 : r, h = "", l = this.month === this.today.getMonth() && this.year === this.today.getFullYear() && e === this.today.getDate(), d = ""; if (e <= t && (0 < o || s <= i)) { var c = 6 < i + this.options.startIn ? i + this.options.startIn - 6 - 1 : i + this.options.startIn; h += "<span " + (0 == c ? ' class="lvs-date-cn" ' : 'class="lvs-date"') + ">" + e + '</span><span class="lvs-weekday">' + this.options.weekabbrs[6 < i + this.options.startIn ? i + this.options.startIn - 6 - 1 : i + this.options.startIn] + "</span>"; var g = (this.month + 1 < 10 ? "0" + (this.month + 1) : this.month + 1) + "-" + (e < 10 ? "0" + e : e) + "-" + this.year, u = this.caldata[g], v = this.year + "-" + (this.month + 1 < 10 ? "0" + (this.month + 1) : this.month + 1) + "-" + (e < 10 ? "0" + e : e), f = convertSolar2Lunar(e, this.month + 1, this.year, 7); u = 1 == TinhNgayHoangDao2(v) ? '<span class="lvs-date-hoangdao" title="Ngày hoàng đạo" ></span>' : '<span class="lvs-date-hacdao" title="Ngày hắc đạo"></span>', (u += 1 == l || 1 == e || 1 == f[0] ? "<span " + (0 == parseInt(c) ? ' class="lvs-date-ngayam-cn" ' : 'class="lvs-date-ngayam"') + ' title="' + f[0] + "/" + f[3] + "/" + f[2] + '" >' + f[0] + "/" + f[3] + "</span>" : "<span " + (0 == parseInt(c) ? ' class="lvs-date-ngayam-cn" ' : 'class="lvs-date-ngayam"') + ' title="' + f[0] + "/" + f[3] + "/" + f[2] + '" >' + f[0] + "</span>") && (d = u), "" !== d && (h += "<div>" + d + "</div>"), ++e } else l = !1; var m = l ? "lvs-today " : ""; "" !== d && (m += "lvs-content"), a += "" !== m ? '<div class="' + m + '">' : "<div>", a += h, a += "</div>" } if (t < e) { this.rowTotal = o + 1; break } a += '</div><div class="lvs-row">' } return a + "</div></div>" }, _isValidDate: function (t) { t = t.replace(/-/gi, ""); var n = parseInt(t.substring(0, 2), 10), a = parseInt(t.substring(2, 4), 10), e = parseInt(t.substring(4, 8), 10); return !(n < 1 || 12 < n) && (!(a < 1 || 31 < a) && ((4 != n && 6 != n && 9 != n && 11 != n || !(30 < a)) && ((2 != n || e % 400 != 0 && e % 4 != 0 || e % 100 == 0 || !(29 < a)) && (!(2 == n && e % 100 == 0 && 29 < a) && { day: a, month: n, year: e })))) }, _move: function (t, n, a) { "previous" === n ? "month" === t ? (this.year = 0 < this.month ? this.year : --this.year, this.month = 0 < this.month ? --this.month : 11) : "year" === t && (this.year = --this.year) : "next" === n && ("month" === t ? (this.year = this.month < 11 ? this.year : ++this.year, this.month = this.month < 11 ? ++this.month : 0) : "year" === t && (this.year = ++this.year)), o(e(this.dayNumber, this.month + 1, this.year)), this._generateTemplate(a) }, getYear: function () { return this.year }, getMonth: function () { return this.month + 1 }, getDay: function () { return this.dayNumber }, getMonthName: function () { return this.options.displayMonthAbbr ? this.options.monthabbrs[this.month] : this.options.months[this.month] }, getCell: function (t) { var n = Math.floor((t + this.startingDay - this.options.startIn) / 7), a = t + this.startingDay - this.options.startIn - 7 * n - 1; return this.$cal.find("div.lvs-body").children("div.lvs-row").eq(n).children("div").eq(a).children("div") }, setData: function (t) { t = t || {}, i.extend(this.caldata, t), this._generateTemplate() }, gotoNow: function (t) { this.month = this.today.getMonth(), this.year = this.today.getFullYear(), this.dayNumber = this.today.getDate(), o(e(this.dayNumber, this.month + 1, this.year)), this._generateTemplate(t) }, goto: function (t, n, a) { this.month = t, this.year = n, o(e(this.dayNumber, this.month + 1, this.year)), this._generateTemplate(a) }, gotoPreviousMonth: function (t) { this._move("month", "previous", t) }, gotoPreviousYear: function (t) { this._move("year", "previous", t) }, gotoNextMonth: function (t) { this._move("month", "next", t) }, gotoNextYear: function (t) { this._move("year", "next", t) } }; var s = function (t) { n.console && n.console.error(t) }; i.fn.calendariosammo = function (t) { var n = i.data(this, "calendariosammo"); if ("string" == typeof t) { var a = Array.prototype.slice.call(arguments, 1); this.each(function () { return n ? i.isFunction(n[t]) && "_" !== t.charAt(0) ? void n[t].apply(n, a) : void s("no such method '" + t + "' for calendario instance") : void s("cannot call methods on calendario prior to initialization; attempted to call method '" + t + "'") }) } else this.each(function () { n ? n._init() : n = i.data(this, "calendariosammo", new i.Calendarios(t, this)) }); return n } }(jQuery, window); var NgayBatDauChi = "1924-02-15", NgayBatDauCan = "1924-02-15", NgayBatDauNam = "1924-02-15", DaiMinh = ["Tân Mùi", "Nhâm Thân", "Quý Dậu", "Đinh Sửu", "Kỷ Mẹo", "Nhâm Ngọ", "Giáp Thân", "Đinh Hợi", "Nhâm Thìn", "Ất Mùi", "Nhâm Dần", "Giáp Thìn", "Ất Tị", "Bính Ngọ", "Kỷ Dậu", "Canh Tuất", "Tân Hợi", "Bính Thìn", "Kỷ Mùi", "Canh Thân", "Tân Dậu"], Chi = ["Tý", "Sửu", "Dần", "Mão", "Thìn", "Tỵ", "Ngọ", "Mùi", "Thân", "Dậu", "Tuất", "Hợi"], Can = ["Giáp", "Ất", "Bính", "Đinh", "Mậu", "Kỷ", "Canh", "Tân", "Nhâm", "Quý"], KhoangGio = ["23h - 1h", "1h-3h", "3h-5h", "5h-7h", "7h-9h", "9h-11h", "11h-13h", "13h-15h", "15h-17h", "17h-19h", "19h-21h", "21h-23h"], MenhNguHanh = ["Hải Trung Kim", "Lư Trung Hỏa", "Đại Lâm Mộc", "Lộ Bàng Thổ", "Kiếm Phong Kim", "Sơn Đầu Hỏa", "Giản Hạ Thủy", "Thành Đầu Thổ", "Bạch Lạp Kim", "Dương Liễu Mộc", "Tuyền Trung Thủy", "Ốc Thượng Thổ", "Tích Lịch Hỏa", "Tùng Bách Mộc", "Trường Lưu Thủy", "Sa Trung Kim", "Sơn Hạ Hỏa", "Bình Địa Mộc", "Bích Thượng Thổ", "Kim Bạch Kim", "Phú Đăng Hỏa", "Thiên Hà Thủy", "Đại Trạch Thổ", "Thoa Xuyến Kim", "Tang Đồ Mộc", "Đại Khê Thủy", "Sa Trung Thổ", "Thiên Thượng Hỏa", "Thạch Lựu Mộc ", "Đại Hải Thủy"], MenhNguHanh2 = ["Vàng trong biển", "Lửa trong lò", "Cây rừng lớn", "Đất ven đường", "Vàng đầu kiếm", "Lửa trên núi", "Nước dưới sông", "Đất trên thành", "Vàng chân đèn", "Cây dương liễu", "Nước trong giếng", "Đất mái nhà", "Lửa sấm chớp", "Cây tùng bách", "Nước giữa dòng", "Vàng trong cát", "Lửa chân núi", "Cây đất bằng", "Đất trên vách", "Vàng lá trắng", "Lửa đèn to", "Nước trên trời", "Đất đầm lầy", "Vàng trang sức", "Gỗ cây dâu", "Nước giữa khe lớn", "Đất trong cát", "Lửa trên trời", "Gỗ Thạch Lựu", "Nước biển lớn"], TietKhi = ["Lập xuân", "Vũ thủy", "Kinh trập", "Xuân phân", "Thanh minh", "Cốc vũ", "Lập hạ", "Tiểu mãn", "Mang chủng", "Hạ chí", "Tiểu thử", "Đại thử", "Lập thu", "Xử thử", "Bạch lộ", "Thu phân", "Hàn lộ", "Sương giáng", "Lập đông", "Tiểu tuyết", "Đại tuyết", "Đông chí", "Tiểu hàn", "Đại hàn"], Truc = ["Kiến (tốt)", "Trừ (thường)", "Mãn (tốt)", "Bình (tốt)", "Định (tốt)", "Chấp (thường)", "Phá (xấu)", "Nguy (xấu)", "Thành (tốt)", "Thu (thường)", "Khai (tốt)", "Bế (xấu)"], TUAN = new Array("Chủ Nhật", "Thứ Hai", "Thứ Ba", "Thứ Tư", "Thứ Năm", "Thứ Sáu", "Thứ Bảy"), THANG = new Array("Giêng", "Hai", "Ba", "Tư", "Năm", "Sáu", "Bảy", "Tám", "Chín", "Mười", "Mười Một", "Chạp"), NgayHoangDao = [1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 1, 0], GioHoangDao = new Array(6), CookieName = "SelectedDate", split_1 = "-", ShowDetailUrl = "/", ImagePath = "/Content/web/images/"; GioHoangDao[0] = [1, 1, 0, 1, 0, 0, 1, 0, 1, 1, 0, 0], GioHoangDao[1] = [0, 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1], GioHoangDao[2] = [1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 1, 0], GioHoangDao[3] = [1, 0, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0], GioHoangDao[4] = [0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1], GioHoangDao[5] = [0, 1, 0, 0, 1, 0, 1, 1, 0, 0, 1, 1];